<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link rel="stylesheet" href="vortext.css">
  <title>Processo Ágil</title>
  <link rel="stylesheet" href="index.css">
  <script src="lib/fittext.js"></script>
</head>

<body>

  <main>

    <section class="scene">
      <div class="content">
        <div class="absolute-0 w-100 h-100 flex-row flex-start">
          <img id="logoScene1" class="" src="assets/logo.png" alt="">
        </div>

        <div class="absolute-0 w-100 h-100 flex-col flex-center">
          <div id="introTextContainer" class="flex-center w-100 introTextContainer">
            <h1 id="introText1">Muita coisa rolou em 2021</h1>
            <h1 id="introText2">Trouxemos um presente e blablabla</h1>
            <h1 id="introText">Texto aquecendo para ver a retrospectiva</h1>
          </div>
          <div id="ocorrenciasCounterContainer">

            <span id="numMovimentacoesScene1Text" class="fw-bold text-muted">Esse é o número de movimentações que os
              seus processos
              tiveram esse ano</span>
            <div class="flex-center w-100 h-100">
              <h4 id="numMovContainer"></h4>
            </div>
            </h4>

          </div>

        </div>
        <div class="absolute-0 w-100 h-100 flex-col flex-center">
          <button id="verMaisButton">Ver mais</button>
        </div>
      </div>
    </section>


    <section class="scene bg-warning">
      <h1 id="tituloCenaPubAndExp" class="text-dark">E dessas movimentações:</h1>
      <div class="content justify-between align-center text-center">
        <div id="qtdPublicacoes" class="card bg-primary mb-3 divPubAndExp">
          <div class="card-header">Publicações</div>
          <div class="card-body p-0 flex-center">
            <h5 class="card-title"><span id="spanTotalPublicacoes"></span></h5>
          </div>
        </div>
        <div id="qtdAndamentos" class="card mb-3 divPubAndExp">
          <div class="card-header">Andamentos</div>
          <div class="card-body p-0 flex-center">
            <h5 class="card-title"><span id="spanTotalAndamentos"></span></h5>
          </div>
        </div>
        <div id="qtdExpedientes" class="card bg-danger mb-3 divPubAndExp">
          <div class="card-header">Expedientes</div>
          <div class="card-body p-0 flex-center">
            <h5 class="card-title"><span id="spanTotalExpedientes"></span></h5>
          </div>
        </div>
      </div>
    </section>

    <section class="scene">
      <div class="content justify-between align-center">
        <div id="tempoEconomizado" class="flex-col justify-between">
          <h3 class="m-3">Esse é o tempo que você economizou esse ano por usar nosso sistema
          </h3>
          <div style="height: 23em;" class="text-primary">
            <h1 id="anosEconomizados"></h1>
            <h1 id="mesesEconomizados"></h1>
            <h1 id="diasEconomizados"></h1>
            <h1 id="horasEconomizados"></h1>
            <h1 id="minutosEconomizados"></h1>
            <h1 id="segundosEconomizados"></h1>
          </div>
        </div>
        <div id="containerEstimativas" class="h-100 flex-center">
          <div class="w-100 flex-center flex-col h-100">
            <div id="introTextContainerScene3" class="flex-center flex-col justify-around w-100 h-100">
              <h2 id="introTextScene3d">Nesse tempo...</h2>
              <div id="estimativasTempo" class="flex-row w-100 justify-around">
                <div class="card bg-dark text-white">
                  <img src="assets/trabalho.gif" class="card-img" alt="...">
                  <div class="card-img-overlay">
                    <h5 class="card-title">Você conseguiria aprender
                      <span id="tempoParaDiasTrabalho"></span>
                      novo(s) idioma(s)
                    </h5>
                  </div>
                </div>
                <div class="card bg-dark text-white">
                  <img src="assets/filme.gif" class="card-img" alt="...">
                  <div class="card-img-overlay">
                    <h5 class="card-title">Dá pra assistir
                      <span id="tempoParaFilme"></span>
                      filmes bem demorados
                    </h5>
                  </div>
                </div>
                <div class="card bg-dark text-white">
                  <img src="assets/musica.gif" class="card-img" alt="...">
                  <div class="card-img-overlay">
                    <h5 class="card-title">Que tal ouvir
                      <span id="tempoParaMusica"></span>
                      musicas
                    </h5>
                  </div>
                </div>
                <div class="card bg-dark text-white">
                  <img src="assets/futebol.gif" class="card-img" alt="...">
                  <div class="card-img-overlay">
                    <h5 class="card-title">Dava para jogar
                      <span id="tempoParaFutebol"></span>
                      partidas de futebol
                    </h5>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="scene bg-black bg-gradient">
      <div class="content flex-col flex-center">
        <h1 id="listaVipTitulo" class="text-light">Clientes VIP</h1>
        <div id="listaVipInfoValor" class="text-white"><span id="listaVipNomeValor"></span> é o seu clientecom maior
          valor da causa de processos.
        </div>
        <div id="listaVipInfoProcessos" class="text-white"><span id="listaVipNomeProcessos"></span> é o seu cliente com
          maior numero de processos
          distribuidos.</div>

        <div id="clientesVipContainer" class="flex-col justify-around align-center grid">
          <div class="pen">
            <div class="stage">
              <div class="vortext">
                <div data-text="" id="listaVipValor" class="vortextRibbon down"></div>
              </div>
              <div class="vortext">
                <div data-text="" id="listaVipProcessos" class="vortextRibbon spotlight up"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>


    <section class="scene ">
      <div class="intro">

      </div>
      <div class="content">
        <div class="w-100 h-100 flex-center flex-row">
          <h1 id="funcionarioMes">Funcionário do Ano</h1>
          <h2 id="funcionarioMesDescricao">Um lugarzinho especial (em nosso coração)
            para essa galera que mais interagiu com a gente
            esse ano.
          </h2>
        </div>
        <div id="prediosContainerScene2" class="flex-row flex-center">
          <div id="divPredioPublicacoes" class="bg-success">
            <div class="foto-colocacao flex-center flex-col">
              <span class="span-colocacao texto-funcionario3">3º lugar</span>
              <img id="fotoFuncionario3" class="foto-funcionario" src="assets/pikachu-3.jfif" alt="">
            </div>
            <span id="nomeFuncionario3" class="texto-funcionario3">Pikachu Sonolento Cansado</span>
          </div>
          <div id="divPredioAndamentos" class="bg-warning">
            <div class="foto-colocacao flex-center flex-col">
              <span class="span-colocacao texto-funcionario1">1º lugar</span>
              <img id="fotoFuncionario1" class="foto-funcionario spotlight" src="assets/pikachu-1.jpg" alt="">
            </div>
            <span id="nomeFuncionario1" class="texto-funcionario1">Pikachu Inacio Lula da Silva</span>
          </div>
          <div id="divPredioExpedientes" class="bg-danger">
            <div class="foto-colocacao flex-center flex-col">
              <span class="span-colocacao texto-funcionario2">2º lugar</span>
              <img id="fotoFuncionario2" class="foto-funcionario" src="assets/pikachu-2.jpg" alt="">
            </div>
            <span id="nomeFuncionario2" class="texto-funcionario2">Senhor Pikachu Pokemon</span>
          </div>
        </div>
      </div>
    </section>



    <div class="progress" style="border-radius: 0 !important;"></div>
  </main>

  <script src="vortext.js"></script>

  <!-- JavaScript Bundle with Popper -->
  <script defer src="lib/anime.min.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://unpkg.com/topojson@3"></script>
  <script defer src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script defer src="//cdnjs.cloudflare.com/ajax/libs/velocity/1.2.3/velocity.min.js"></script>
  <script defer src="//cdnjs.cloudflare.com/ajax/libs/gsap/3.8.0/gsap.min.js"></script>
  <script defer src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
  <script defer src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/animation.gsap.js"></script>
  <script defer src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/animation.velocity.js"></script>
  <script defer src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.min.js"></script>

  <script type="module" src="build/utils.js"></script>
  <script type="module" src="build/CSSAttributes.js"></script>
  <script type="module" src="build/CSSEditor.js"></script>
  <script type="module">
    import { CSSAttributes } from './build/CSSAttributes.js';
    import { CSSEditor } from './build/CSSEditor.js';
    import { SceneScaffold } from './build/Scene/SceneScaffold.js';
    import { Scene } from './build/Scene/Scene.js';
    import { Scene1 } from './build/Components/Scene1.js';
    import { Scene2 } from './build/Components/Scene2.js';
    import { Scene3 } from './build/Components/Scene3.js';
    import { Scene8 } from './build/Components/Scene8.js';
    import { Scene9 } from './build/Components/Scene9.js';
    import { Scene10 } from './build/Components/Scene10.js';

    import { SceneView } from './build/Scene/SceneView.js';
    import { throttle, zeroBefore, animacaoBarraProgresso, minutesToMilliseconds } from './build/utils.js';

    window.addEventListener('load', () => {

      const scrollMagicIndicatorsController = new ScrollMagic.Controller();

      const scaffolds = document.querySelectorAll('.scene');

      const userData = fetchUserData();
      console.log(userData)

      SceneView.createControllers();

      SceneView.addScene(new Scene1(new SceneScaffold(scaffolds[0]), userData.totalPub + userData.totalAnd + userData.totalExp), scrollMagicIndicatorsController);

      /// Cena 2
      document.getElementById('spanTotalPublicacoes').innerHTML = userData.totalPub;
      document.getElementById('spanTotalAndamentos').innerHTML = userData.totalAnd;
      document.getElementById('spanTotalExpedientes').innerHTML = userData.totalExp;
      SceneView.addScene(new Scene2(new SceneScaffold(scaffolds[1])), scrollMagicIndicatorsController);

      SceneView.addScene(new Scene3(new SceneScaffold(scaffolds[2]), minutesToMilliseconds(userData.tempoEconomizado)), scrollMagicIndicatorsController);


      /// Cena 9
      const nomeMaiorCausa = userData.clienteComMaiorCausa;
      let maiorCausaSplit = nomeMaiorCausa.split(' ').slice(0, 2);
      let maiorCausa3D = maiorCausaSplit.filter(Boolean).join(" ");

      document.getElementById('listaVipValor').innerHTML = maiorCausa3D;
      document.getElementById('listaVipValor').setAttribute('data-text', nomeMaiorCausa);
      document.getElementById('listaVipNomeValor').innerHTML = nomeMaiorCausa;

      const nomeMaisProcessos = userData.clientesComMaisProcessos.sort(c => c.total).reverse()[0].nome;
      let maisProcessosSplit = nomeMaisProcessos.split(' ').slice(0, 2);;
      let maisProcessos3D = maisProcessosSplit.filter(Boolean).join(" ");

      document.getElementById('listaVipProcessos').innerHTML = maisProcessos3D;
      document.getElementById('listaVipProcessos').setAttribute('data-text', nomeMaisProcessos);
      document.getElementById('listaVipNomeProcessos').innerHTML = nomeMaisProcessos;

      SceneView.addScene(new Scene9(new SceneScaffold(scaffolds[3])), scrollMagicIndicatorsController);


      SceneView.addScene(new Scene10(new SceneScaffold(scaffolds[4]), scrollMagicIndicatorsController));

      SceneView.updateControllers();


      const progressDivCss = new CSSAttributes({
        width: `100%`,
        height: `10px`,
        position: 'fixed',
        isGradient: true,
        gradientRotation: '230deg',
        transition: 'all .3s',
        x: `0px`,
        top: `calc(100% - 10px)`,
        isProgressBar: true,
        progressRotation: '90deg',
        progress: 0,
        progressColor: 'darkblue',
        progressBackground: 'transparent'
      });

      document.getElementById('prevScene').addEventListener('click', evt => {
        SceneView.prev();
      })

      document.getElementById('verMaisButton').addEventListener('click', evt => {
        SceneView.next();
      })

      document.getElementById('nextScene').addEventListener('click', evt => {
        SceneView.next();
      })

      const progressBar = document.querySelector('.progress');

      CSSEditor.from(progressBar, progressDivCss)

      window.addEventListener('scroll', function (evt) {
        throttle(() => {
          const posicaoDestino = (this.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100;
          animacaoBarraProgresso(progressBar, progressDivCss, posicaoDestino, 'scrollProgress');
        }, 100, 'scrollProgress')
      });

      let ticking = false;
      window.addEventListener('wheel', function (evt) {
        throttle(() => {
          window.requestAnimationFrame(() => {
            if (Math.sign(evt.deltaY) > 0) {
              SceneView.next();
            } else {
              SceneView.prev();
            }
          })
        }, 1500, 'wheelNextScene')
      });

      SceneView.scrollToScene(0);



      setStyles();
      render();
      animate();
      setInterval(() => {
        animate();
      }, 12000);
    })


    function fetchUserData() {
      return {
        "usuarioRaiz": "567af06d-d133-46c0-afa1-04815fb7a9c5",
        "totalPub": 1471,
        "totalOc": 40742,
        "totalAnd": 39271,
        "totalExp": 0,
        "tempoEconomizado": 6372000,
        "distribuido2021": 109, "crescimento2021": 5,
        "totalProcessosGeral": 1833,
        "processosPorEstado": [{ "total": 5 }, { "estado": "Ceará", "total": 1 }, { "estado": "Maranhão", "total": 1 }, { "estado": "Paraíba", "total": 18 }, { "estado": "Piauí", "total": 1 }, { "estado": "Rio Grande do Norte", "total": 81 }, { "estado": "Sergipe", "total": 2 }],
        "lifeTime": 46,
        "clientesComMaisProcessos": [{ "cliente": "a8eaabd7-a355-4c58-a865-599f327f86e5", "nome": "PLANO URBANISMO LTDA", "total": 586 }, { "cliente": "9689afb9-6266-44c5-aa6c-5001c123247f", "nome": "Stephanie Brandão Soares", "total": 377 }, { "cliente": "a55eeeef-3c04-46cf-beee-f673c3fc643c", "nome": "VIVERDE EMPREENDIMENTOS LTDA", "total": 362 }, { "cliente": "2b12a0d9-c57a-42b6-9133-5b3930fc7e3a", "nome": "7º Ofício de Notas da Comarca de Natal", "total": 325 }, { "cliente": "9d166085-6f99-4bd6-a47a-29437c7ed50a", "nome": "CAMINHO DO ATLANTICO EMPREENDIMENTOS LTDA", "total": 294 }, { "cliente": "db341128-ad19-4224-8a79-4eb8f2d0ea68", "nome": "CIDADE VERDE LTDA", "total": 132 }, { "cliente": "082da7c0-61cb-4752-832a-8bf406182749", "nome": "Viverde SPE 1 Empreendimentos Imobiliários Ltda", "total": 100 }, { "cliente": "1f03d2f8-3dbb-4685-bdeb-3fb166b99064", "nome": "LUIS CÉLIO SOARES", "total": 40 }, { "cliente": "457070a4-7d96-437d-bc8a-29ff43ab70a3", "nome": "Viverde SPE 2 Empreendimentos Imobiliários Ltda", "total": 26 }, { "cliente": "8060cd74-7453-468e-9884-acfbe7923cd6", "nome": "Viverde SPE 4 Empreendimentos Imobiliários Ltda", "total": 18 }, { "cliente": "6c810454-aef6-4764-88bf-4667cbac538a", "nome": "Viverde Incorporações Ltda", "total": 9 }, { "cliente": "9aab91c3-8d6e-4f5d-bd93-b77605b51915", "nome": "Daniel Fernandes Matias", "total": 9 }, { "cliente": "3756196d-e8bb-4a76-a4c2-1dfcf3a064d5", "nome": "Capuche Viverde Incorporações Ltda", "total": 8 }, { "cliente": "d60b20f2-65a4-4147-b638-2c6d0ce96764", "nome": "LCS EMPREENDIMENTOS IMOBILIARIOS LTDA", "total": 8 }, { "cliente": "5983f7a0-1012-49c7-bd0f-fc40dd4ae9ba", "nome": "RIOPLANO EMPREENDIMENTOS IMOBILIARIOS LTDA", "total": 8 }, { "cliente": "a7addfd1-1c4c-4ffb-852d-040a0e987752", "nome": "Maria José Brandão Soares", "total": 5 }, { "cliente": "d6f4568b-d312-408f-b669-6205e4c54530", "nome": "LCS EMPREENDIMENTOS IMOBILIARIOS LTDA", "total": 4 }, { "cliente": "d051133e-80b5-46ed-9f26-f4eed84173fe", "nome": "LUIZ CLÁUDIO BRANDÃO SOARES", "total": 2 }, { "cliente": "9d43c1c5-1353-4550-b709-15748dff983b", "nome": "Caroline Brandão Soares Menezes", "total": 1 }, { "cliente": "68974183-4013-4338-9100-8a8acb640db9", "nome": "Thiago Cortez Meira de Medeiros", "total": 1 }],
        "clienteComMaiorCausa": "7º Ofício de Notas da Comarca de Natal",
        "rankingMaisAcessos": [{ "id": "df65e5f1-a097-42b9-b762-a28f18d1355d", "nome": "ADRIANO PAULO DO NASCIMENTO", "total": 156 }, { "id": "28b25947-f444-4cc2-975c-9969f9f81285", "nome": "RAISSA DA COSTA PACHECO", "total": 14 }, { "id": "79bcb1dd-cb46-49e3-ada4-970045f7540e", "nome": "ARNALDO JOSE DE FRANÇA JUNIOR", "total": 1 }, { "id": "6413d3b8-55e4-431b-9d5e-afd9027eab75", "nome": "Felipe de Macedo", "total": 1 }]
      };
    }
  </script>

</body>

</html>
<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Processo √Ågil: pleshw</title>
  <!-- CSS only -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link rel="stylesheet" href="index.css">
</head>

<body>
  <main>
    <section class="scene text-white bg-dark">
      <h5>Cena 1</h5>
    </section>
    <section class="scene text-white bg-success">
      <h5>Cena 2</h5>
    </section>
    <section class="scene text-white bg-danger">
      <h5>Cena 3</h5>
    </section>
    <section class="scene text-white bg-info">
      <h5>Cena 4</h5>
    </section>
    <section class="scene text-white bg-warning">
      <h5>Cena 5</h5>
    </section>
    <section class="scene text-white bg-primary">
      <h5>Cena 6</h5>
    </section>
  </main>

  <div id='abc'></div>

  <!-- JavaScript Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
  <script defer src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script defer src="//cdnjs.cloudflare.com/ajax/libs/velocity/1.2.3/velocity.min.js"></script>
  <script defer src="//cdnjs.cloudflare.com/ajax/libs/gsap/3.8.0/gsap.min.js"></script>
  <script defer src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
  <script defer src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/animation.gsap.js"></script>
  <script defer src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/animation.velocity.js"></script>
  <script defer src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.min.js"></script>


  <script type="module" src="build/utils.js"></script>
  <script type="module" src="build/CSSAttributes.js"></script>
  <script type="module" src="build/CSSEditor.js"></script>
  <script type="module">
    import { CSSAttributes } from './build/CSSAttributes.js';
    import { CSSEditor } from './build/CSSEditor.js';
    import { SceneView } from './build/Scene/SceneView.js';
    import { throttle, animacaoBarraProgresso } from './build/utils.js';
    const progressDivCss = new CSSAttributes({
      width: `100%`,
      height: `10px`,
      position: 'fixed',
      isGradient: true,
      gradientRotation: '230deg',
      transition: 'all .3s',
      x: `0px`,
      top: `calc(100% - 10px)`,
      isProgressBar: true,
      progressRotation: '90deg',
      progress: 0,
      progressColor: 'darkblue',
      progressBackground: 'transparent'
    });

    CSSEditor.from(document.getElementById('abc'), progressDivCss)

    window.addEventListener('scroll', function () {
      throttle(() => {
        const posicaoDestino = (this.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100;
        animacaoBarraProgresso(document.getElementById('abc'), progressDivCss, posicaoDestino, 'scrollProgress')
      }, 100, 'scrollProgress')
    })

    const scrollMagicIndicatorsController = new ScrollMagic.Controller({ addIndicators: true });
    const scenesElement = document.querySelectorAll('.scene');

    const scene = new ScrollMagic.Scene({ triggerElement: scenesElement[1], duration: scenesElement[1].clientHeight })
      .setTween(scenesElement[1], 0.5, { backgroundColor: "red", width: "-=100" })
      .addIndicators() // add indicators (requires plugin)
      .addTo(scrollMagicIndicatorsController)
      .triggerHook(1);

    const scene2 = new ScrollMagic.Scene({ triggerElement: scenesElement[2], duration: 200 })
      .setTween(scenesElement[2], 0.5, { backgroundColor: "red", width: "-=500" })
      .addIndicators() // add indicators (requires plugin)
      .addTo(scrollMagicIndicatorsController);


  </script>
</body>

</html>
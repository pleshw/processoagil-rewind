<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Processo Ágil: pleshw</title>
  <link rel="stylesheet" href="index.css">
</head>

<body>

  <main>

    <section class="scene">
      <div class="intro">

      </div>
      <div class="content">
        <div class="absolute-0 w-100 h-100 flex-row flex-start">
          <img id="logoScene1" class="" src="assets/logo.png" alt="">
        </div>

        <div class="absolute-0 w-100 h-100 flex-col flex-center">
          <div id="introTextContainer" class="flex-center w-100">
            <h1 id="introText1">Muita coisa rolou em 2021</h1>
            <h1 id="introText2">Trouxemos um presente e blablabla</h1>
            <h1 id="introText">Texto aquecendo para ver a retrospectiva</h1>
          </div>
          <div id="ocorrenciasCounterContainer">
            <span id="numMovimentacoesScene1Text">Esse é o número de movimentações que os seus processos
              tiveram esse ano</span>
            <h4 id="numMovContainer">
              <span id="numMovimentacoesScene1">0</span>
            </h4>
          </div>

        </div>
        <div class="absolute-0 w-100 h-100 flex-col flex-center">
          <button id="verMaisButton">Ver mais</button>
        </div>
      </div>
    </section>

    <section class="scene">
      <div class="intro">

      </div>
      <div class="content">
        <div class="w-100 h-100 flex-center flex-row">
          <h1 id="funcionarioMes">Funcionário do Ano</h1>
          <h2 id="funcionarioMesDescricao">Um lugarzinho reservado pra {sinonimo de saudar} galera que mais acessou
            nosso sistema esse ano!</h2>
        </div>
        <div id="prediosContainerScene2" class="flex-row flex-center">
          <div id="divPredioPublicacoes">
            <div class="foto-colocacao flex-center flex-col">
              <span class="span-colocacao texto-funcionario3">3º lugar</span>
              <img id="fotoFuncionario3" class="foto-funcionario" src="assets/pikachu-3.jfif" alt="">
            </div>
            <span id="nomeFuncionario3" class="texto-funcionario3">Ciro Gomes</span>
          </div>
          <div id="divPredioAndamentos">
            <div class="foto-colocacao flex-center flex-col">
              <span class="span-colocacao texto-funcionario1">1º lugar</span>
              <img id="fotoFuncionario1" class="foto-funcionario spotlight" src="assets/pikachu-1.jpg" alt="">
            </div>
            <span id="nomeFuncionario1" class="texto-funcionario1">Jair Messias Bolsonaro Neles</span>
          </div>
          <div id="divPredioExpedientes">
            <div class="foto-colocacao flex-center flex-col">
              <span class="span-colocacao texto-funcionario2">2º lugar</span>
              <img id="fotoFuncionario2" class="foto-funcionario" src="assets/pikachu-2.jpg" alt="">
            </div>
            <span id="nomeFuncionario2" class="texto-funcionario2">Senhor Lula PT da Silva</span>
          </div>
        </div>
      </div>
    </section>
    <section class="scene">
      <div class="content">
        <h1>Sabemos Como seu tempo é importante e deve ser valorizado...</h1>

      </div>
    </section>
    <section class="scene">
      <div class="content">
        <div class="tempo-economizado">
          <h1 class="dias-economizados"></h1>
          <h1 class="horas-economizados"></h1>
          <h1 class="minutos-economizados"></h1>
          <h1 class="segundos-economizados"></h1>
        </div>
        <div class="w-50 h-100 flex-center">
          <div class="w-50 flex-center flex-col h-100">
            <h2>Esse é o tempo que você economizou por utilizar nosso sistema. </h2>
          </div>

        </div>
      </div>
    </section>
    <section class="scene">
      <h5>Cena 10</h5>
      <div class="content">
        <div class="background-content">
          <h1 class="spotlight" data-text="DESTAQUE">DESTAQUE</h1>
        </div>
      </div>
    </section>
    <section class="scene">
      <h5>Cena 11</h5>
    </section>

    <div class="progress"></div>
  </main>

  <!-- JavaScript Bundle with Popper -->
  <script defer src="lib/anime.min.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://unpkg.com/topojson@3"></script>
  <script defer src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script defer src="//cdnjs.cloudflare.com/ajax/libs/velocity/1.2.3/velocity.min.js"></script>
  <script defer src="//cdnjs.cloudflare.com/ajax/libs/gsap/3.8.0/gsap.min.js"></script>
  <script defer src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
  <script defer src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/animation.gsap.js"></script>
  <script defer src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/animation.velocity.js"></script>
  <script defer src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.min.js"></script>

  <script type="module" src="build/utils.js"></script>
  <script type="module" src="build/CSSAttributes.js"></script>
  <script type="module" src="build/CSSEditor.js"></script>
  <script type="module">
    import { CSSAttributes } from './build/CSSAttributes.js';
    import { CSSEditor } from './build/CSSEditor.js';
    import { SceneScaffold } from './build/Scene/SceneScaffold.js';
    import { Scene } from './build/Scene/Scene.js';
    import { Scene1 } from './build/Components/Scene1.js';
    import { Scene2 } from './build/Components/Scene2.js';
    import { SceneView } from './build/Scene/SceneView.js';
    import { throttle, zeroBefore, animacaoBarraProgresso } from './build/utils.js';

    window.addEventListener('load', () => {

      const scrollMagicIndicatorsController = new ScrollMagic.Controller();

      const scaffolds = document.querySelectorAll('.scene');


      SceneView.createControllers();

      SceneView.addScene(new Scene1(new SceneScaffold(scaffolds[0]), scrollMagicIndicatorsController));

      SceneView.addScene(new Scene2(new SceneScaffold(scaffolds[1]), scrollMagicIndicatorsController));

      SceneView.updateControllers();

      const progressDivCss = new CSSAttributes({
        width: `100%`,
        height: `10px`,
        position: 'fixed',
        isGradient: true,
        gradientRotation: '230deg',
        transition: 'all .3s',
        x: `0px`,
        top: `calc(100% - 10px)`,
        isProgressBar: true,
        progressRotation: '90deg',
        progress: 0,
        progressColor: 'darkblue',
        progressBackground: 'transparent'
      });

      document.getElementById('prevScene').addEventListener('click', evt => {
        SceneView.prev();
      })

      document.getElementById('verMaisButton').addEventListener('click', evt => {
        SceneView.next();
      })

      document.getElementById('nextScene').addEventListener('click', evt => {
        SceneView.next();
      })

      const progressBar = document.querySelector('.progress');

      CSSEditor.from(progressBar, progressDivCss)

      window.addEventListener('scroll', function (evt) {
        throttle(() => {
          const posicaoDestino = (this.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100;
          animacaoBarraProgresso(progressBar, progressDivCss, posicaoDestino, 'scrollProgress');
        }, 100, 'scrollProgress')
      });

      let ticking = false;
      window.addEventListener('wheel', function (evt) {
        throttle(() => {
          window.requestAnimationFrame(() => {
            if (Math.sign(evt.deltaY) > 0) {
              SceneView.next();
            } else {
              SceneView.prev();
            }
          })
        }, 1500, 'wheelNextScene')
      });

      SceneView.scrollToScene(0);

      SceneView.get(3).animationCallback = () => {
        setVortextStyles();
        renderVortext();
        setTimeout(animateVortext);
      }

      SceneView.get(2).animationCallback = () => {
        var customerTime = {
          saved: 0
        };

        const strDateOneDayAfter = new Date(customerTime.saved * 1000)
          .toISOString()
          .substr(9, 10)
          .replace('T', ':');

        const divTempoEconomizado = document.createElement('div');
        divTempoEconomizado.classList.add('tempo-economizado');
        this.scene.content.insertAdjacentElement('afterbegin', divTempoEconomizado);

        const h1Dias = document.createElement('h1');
        h1Dias.classList.add('dias-economizados');
        const h1Horas = document.createElement('h1');
        h1Horas.classList.add('horas-economizados');
        const h1Minutos = document.createElement('h1');
        h1Minutos.classList.add('minutos-economizados');
        const h1Segundos = document.createElement('h1');
        h1Segundos.classList.add('segundos-economizados');

        anime({
          targets: customerTime,
          saved: 100000,
          round: 1,
          delay: 1000,
          duration: 7500,
          easing: 'easeInOutExpo',
          update: function () {
            const strDateSplitted = strDateOneDayAfter.split(':')
            const dias = +strDateSplitted[0] - 1;
            const horas = +strDateSplitted[1];
            const minutos = +strDateSplitted[2];
            const segundos = +strDateSplitted[3];

            const textoDias = dias > 0 ? `${ zeroBefore(dias) } ${ dias > 1 ? 'dias' : 'dia' }` : '';
            const textoHoras = textoDias || horas > 0 ? `${ zeroBefore(horas) } horas` : '';
            const textoMinutos = textoHoras || minutos > 0 ? `${ zeroBefore(minutos) } minutos` : '';
            const textoSegundos = textoMinutos || segundos > 0 ? `${ zeroBefore(segundos) } segundos` : '';

            if (textoDias) {
              if (divTempoEconomizado.querySelector('.dias-economizados')) {
                divTempoEconomizado.insertAdjacentElement('afterbegin', h1Dias);
              }
              h1Dias.innerHTML = textoDias;
            }

            if (textoHoras) {
              if (divTempoEconomizado.querySelector('.horas-economizados')) {
                divTempoEconomizado.insertAdjacentElement('afterbegin', h1Horas);
              }
              h1Horas.innerHTML = textoHoras;
            }

            if (textoMinutos) {
              if (divTempoEconomizado.querySelector('.minutos-economizados')) {
                divTempoEconomizado.insertAdjacentElement('afterbegin', h1Minutos);
              }
              h1Minutos.innerHTML = textoMinutos;
            }

            if (textoSegundos) {
              if (divTempoEconomizado.querySelector('.segundos-economizados')) {
                divTempoEconomizado.insertAdjacentElement('afterbegin', h1Segundos);
              }
              h1Segundos.innerHTML = textoSegundos;
            }
          }
        });
      }

    })
  </script>

</body>

</html>